---
title: 框架中一些源码技巧(Java)与思考
date: 2020-08-30 13:45:32
---

1. 定义自己项目的ThreadFactory，在公司的项目我的处理方式是创建了很多个小线程池来处理很多小模块(需要异步去处理：比如回调给第三方客户，给用户发送短信，将数据推送给监控系统，我们系统本身的日志记录)，其实随着系统数据量的不端上升，觉着应该把这些和主流程业务不相关的附加边缘业务隔离，将系统服务进行更加细粒度划分。会牵扯出来几个问题：第一，到底什么是微服务，你们的是微服务架构吗？恐怕不是吧；第二，微服务部署复杂之后，挺期待容器化部署、编排的，docker，k8s的。这个时候是解决了一方面问题：就是建立在应用开发好，部署在容器中，然后可以进行方便的管理，但是应用本身的代码质量还是需要程序员来把握，毕竟应用提供的服务业务能力才是这些一切存在的意义。
2. Long Polling 长轮询。client发起请求，如果此时服务端如果没有相关数据，会hold住，直到服务端数据准备好了，或者超时返回或者网络故障了，然后客户端立即进行发起下一次请求。这里需要注意的是服务端的hold处理，servlet3.0以后可以使用异步servlet的处理可以减少对于容器中线程的占用消耗，提升性能。


##### 好玩的
```latex
一提到钱，大家就不是那么亲热了。
```


##### 参考
- https://www.tutorialspoint.com/lua/index.htm
- https://www.lua.org/manual/5.3/manual.html

